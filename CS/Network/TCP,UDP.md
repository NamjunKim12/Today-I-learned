## TCP UDP

- TCP와 UDP는 TCP/IP의 전송계층에서 사용되는 프로토콜이다. 전송계층은 IP에 의해 전달되는 패킷의 오류를 검사하고 재전송 요구 등의 제어를 담당하는 계층이다.

#### 참고) 4. 전송 계층(Transport Layer)
> TCP, UDP
- TCP와 UDP 프로토콜을 통해 통신을 활성화한다. 포트를 열어두고, 프로그램들이 전송을 할 수 있도록 제공해준다.
- 데이터 전송을 위해서 Port 번호를 사용한다.
- 송수신자 같의 신뢰성있고 효율적인 데이터 전송을 위해 오류검출 및 복구, 흐름제어와 중복 검사를 수행한다.
- 전송 계층의 데이터 단위를 일컬어 **세그먼트**라고 한다.

요약 : 포트 번호를 사용하여 도착지 컴퓨터의 최종 도착지인 프로세스에 까지 데이터가 도달하게 하는 모듈


### TCP

- TCP는 연결 지향적 프로토콜로서, 클라이언트와 서버가 연결된 상태에서 데이터를 주고받는 프로토콜을 의미한다. 클라이언트가 연결 요청을 하고, 서버가 연결을 수락하면 통신선로가 고정되고, 모든 데이터는 고정된 통신 선로를 통해서 순차적으로 전달된다.
-  TCP는 네트워크에 연결된 컴퓨터에서 실행되는 프로그램 간에 일련의 옥텟(`데이터`, `메세지`, `세그먼트`라는 블록 단위)를 안정적으로, 순서대로, 에러없이 교환할 수 있게 한다.

### TCP의 특징

1. 연결형 서비스
  - 연결형 서비스로 가상 회선 방식을 제공한다.
    - 3-way handshaking 과정을 통해 연결을 설정
    - 4-way handshaking을 통해 연결을 해제

2. 흐름제어(Flow Control)
  - 데이터 처리 속도를 조절하여 수신자의 버퍼 오버플로우를 방지

3. 혼잡제어(Congestion Control)
  - 네트워크 내의 패킷수가 넘치게 증가하지 않도록 방지 

4. 신뢰성 높은 전송(Reliable transmission)

5. 전이중, 점대점 방식

#### TCP 헤더
- 응용 게층으로부터 데이터를 받은 TCP는 헤더를 추가한 후에 이를 IP로 보낸다.

#### ACK 제어비트
- ACK는 송신측에 대하여 수신측에서 긍정 응답으로 보내지는 전송제어용 캐릭터이다.
- ACK 번호를 사용하여 패킷이 도착했는지 확인한다.(송신한 패킷이 제대로 도착하지 않았으면 재송신을 요구한다.)


### UDP

- 전송계층의 비연결 지향적 프로토콜로, 데이터를 주고 받을 때 연결 절차를 거치지 않고 발신자가 일방적으로 데이터를 발신하는 방식을 의미한다. 연결 과정이 없기 때문에 TCP보다는 빠른 전송을 할 수 있지만 데이터의 신뢰성은 떨어진다.
- UDP는 발신자가 데이터 패킷을 순차적으로 보내더라도 이 패킷들은 서로 다른 통신 선로를 통해 전달 될 수 있다. 또한 먼저 보낸 패킷이 느린 선로를 통해 전송될 경우 나중에 보낸 패킷보다 늦게 도착할 수 있다.
- 최악의 경우 잘못된 선로로 전송되어 유실될 수도 있다. 이때는 TCP와는 다르게 중간에 패킷이 유실, 변조돼도 재전송을 하지 않는다.



### TCP vs UDP server

- TCP는 Transmission Control Protocol의 약자이고, UDP는 User Datagram Protocol의 약자이다. 두 프로토콜은 모두 패킷을 한 컴퓨터에서 다른 컴퓨터로 전달해주는 `IP 프로토콜`을 기반으로 구현되어 있지만, 서로 다른 특징을 가지고 있다.
- 두 프로토콜 모두 포트번호를 이용하여 주소를 지정하고, 데이터 오류검사를 위한 체크섬이 존재한다.

먼저, TCP의 데이터 송신 과정을 살펴보자.

![image](https://madplay.github.io/img/post/2018-02-04-network-tcp-udp-tcpip-2.png)

- TCP는 데이터를 송,수신 할때마다 확인하여 통신의 신뢰성을 높인다. 
- 웹, 메일, 파일 공유 등 데이터가 누락되면 안되는 서비스는 TCP를 사용한다.

![image](https://madplay.github.io/img/post/2018-02-04-network-tcp-udp-tcpip-3.png)

- UDP는 데이터의 신뢰성보단 속도를 중시하는 방식이다. 확인 절차가 없어 통신의 신속성을 높인다.
- VOIP같이 시간 동기가 필요한, 특히 속도를 필요로 하는 서비스들이 UDP를 사용하고 있다.

